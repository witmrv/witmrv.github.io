import{j as e,r as i,M as N,G as n,S as d,Q as u,w as f,U as b,V as C,W as v,X as I,Y as h,Z as S,$ as j}from"./index-DhtQs5D_.js";const F=({title:t,children:a})=>e.jsxs("div",{className:"flex justify-between items-center w-full py-1",children:[e.jsx("h2",{className:"formbox_title",children:t}),e.jsx("div",{className:"flex items-center",children:a})]});function L(){const[t,a]=i.useState({companyName:"",registerNumber:"",address:"",contact:""}),[p,o]=i.useState(!1);i.useState(!1);const m=JSON.parse(sessionStorage.getItem("user")).userType||"",g=m==="admin",l=s=>{let r=s.target.name,c=s.target.value;a({...t,[r]:c})},x=()=>{h({path:"/companyInfo/info/fad7fe52-9c36-40c1-9d41-76df33c7d9f7",method:"GET"}).then(s=>{s.status===200&&s.json().then(r=>{a({...r})})})},y=async s=>{s.preventDefault(),o(!0);const r={id:t.id||S(),...t};h({path:"/companyInfo/register",method:"POST",body:JSON.stringify(r)}).then(c=>{if(c.status!=200){j.error("회사정보 저장 실패",{onClose:()=>o(!1)});return}else j.success("회사정보 저장 성공",{onClose:()=>o(!1)}),x()})};return i.useEffect(()=>{x()},[]),e.jsxs(N,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[e.jsx(F,{title:"회사정보"}),e.jsx("form",{noValidate:!0,onSubmit:y,children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(u,{children:"회사명"}),e.jsx(f,{id:"companyName",name:"companyName",value:t.companyName,onChange:l,fullWidth:!0})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(u,{children:"사업자번호"}),e.jsx(f,{id:"registerNumber",name:"registerNumber",value:t.registerNumber,onChange:l,fullWidth:!0})]})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(b,{formValue:t,setFormValue:a,label:"주소",textFieldId:"address",textFieldName:"address"})}),e.jsx(n,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(u,{children:"전화번호"}),e.jsx(C,{id:"contact",name:"contact",hiddenLabel:!0,value:t.contact||"",InputProps:{readOnly:!g},onChange:l})]})}),m==="admin"&&e.jsx(n,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:e.jsx(v,{variant:"contained",startIcon:e.jsx(I,{}),type:"submit",loading:p,loadingPosition:"start",children:"저장"})})]})})]})}export{L as default};
