import{j as e,G as a,S as d,Q as c,w as x,V as S,a0 as P,a1 as v,W as C,X as I,r as m,a2 as L,M as f,a3 as g,a4 as M,a5 as T,a6 as w,Y as y,a7 as E,$ as b}from"./index-DhtQs5D_.js";function G({formValue:t,setFormValue:p,onSubmit:u,isLoading:h}){const l=JSON.parse(sessionStorage.getItem("user")).userType||"",n=l==="admin",o=i=>{let s=i.target.name,r=i.target.value;p({...t,[s]:r})};return e.jsx(e.Fragment,{children:e.jsx("form",{noValidate:!0,onSubmit:u,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"직원명"}),e.jsx(x,{id:"name",name:"name",hiddenLabel:!0,value:t.name||"",InputProps:{readOnly:!0}})]})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"전화번호"}),e.jsx(S,{id:"phone",name:"phone",hiddenLabel:!0,value:t.phone||"",InputProps:{readOnly:!n},onChange:o})]})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"생년월일"}),e.jsx(x,{id:"birth",name:"birth",hiddenLabel:!0,value:t.birth||"",InputProps:{readOnly:!n}})]})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"부서"}),e.jsx(x,{id:"department",name:"department",hiddenLabel:!0,value:t.department||"",InputProps:{readOnly:!n},onChange:o})]})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"직급"}),e.jsx(x,{id:"position",name:"position",hiddenLabel:!0,value:t.position||"",InputProps:{readOnly:!n},onChange:o})]})}),e.jsx(a,{item:!0,xs:6,children:e.jsxs(d,{spacing:1,children:[e.jsx(c,{children:"입사일"}),e.jsx(P,{value:t.joinedDate?v(t.joinedDate):null,format:"YYYY-MM-DD",onChange:i=>{o({target:{name:"joinedDate",value:i?i.format("YYYY-MM-DDTHH:mm:ss"):null}})}})]})}),l==="admin"&&e.jsx(a,{item:!0,xs:12,container:!0,justifyContent:"flex-end",children:e.jsx(C,{variant:"contained",startIcon:e.jsx(I,{}),type:"submit",loading:h,loadingPosition:"start",children:"저장"})})]})})})}const Y=[{field:"name",headerName:"이름",flex:1.5,headerAlign:"center",align:"center",editable:!1},{field:"department",headerName:"부서",flex:1,editable:!1,headerAlign:"center",align:"center"},{field:"position",headerName:"직급",flex:1,editable:!1,headerAlign:"center",align:"center"}];function O(){const[t,p]=m.useState([]),[u,h]=m.useState({name:"",phone:"",userId:""}),[j,l]=m.useState(!1),n=()=>{y({path:"/employee/emplList",method:"GET"}).then(s=>{s.status===200&&s.json().then(r=>{p([...r])})})},o=s=>{y({path:"/employee/"+s.row.id,method:"GET"}).then(r=>{r.status===200&&r.json().then(D=>{h(D)})})},i=async s=>{if(s.preventDefault(),l(!0),(await E("/employee/join",u)).status!=200){b.error("회원정보 수정 실패",{onClose:()=>l(!1)});return}else b.success("회원정보 수정 완료",{onClose:()=>l(!1)}),n()};return m.useEffect(()=>{n()},[]),e.jsxs(L.Split,{initialPrimarySize:"40%",minPrimarySize:"200px",style:{display:"flex",height:"100vh",width:"100%"},children:[e.jsxs(f,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[e.jsx(g,{title:"직원 목록",showButton:!1}),e.jsx(M,{rows:t,columns:Y,initialState:{density:"compact"},slots:{toolbar:T},onRowClick:o,showCellVerticalBorder:!0,sx:{"& .MuiDataGrid-cell, & .MuiDataGrid-columnSeparator":{borderColor:"#ddd"},"& .MuiDataGrid-columnHeaders":{borderBottom:"1px solid #ddd"}},localeText:w.components.MuiDataGrid.defaultProps.localeText})]}),e.jsxs(f,{sx:{height:"100%"},children:[e.jsx(g,{title:"직원 정보",showButton:!1}),e.jsx(G,{formValue:u,setFormValue:h,onSubmit:i,isLoading:j})]})]})}export{O as default};
